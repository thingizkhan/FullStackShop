{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./CartPage.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function CartPage(){const[cart,setCart]=useState(JSON.parse(localStorage.getItem('cart'))||[]);const[totalPrice,setTotalPrice]=useState(0);useEffect(()=>{const total=cart.reduce((sum,item)=>sum+item.price,0);setTotalPrice(total);},[cart]);const removeFromCart=id=>{const updatedCart=cart.filter(item=>item.id!==id);setCart(updatedCart);localStorage.setItem('cart',JSON.stringify(updatedCart));};const handlePayNow=async()=>{try{const response=await fetch('/api/create-checkout-session',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({cart})});const session=await response.json();window.location.href=session.url;}catch(error){console.error('Error:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Cart\"}),cart.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Your cart is empty\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"ul\",{children:cart.map(item=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",item.price]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.id),children:\"Remove\"})]})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Cart Summary\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total Price: $\",totalPrice.toFixed(2)]}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePayNow,children:\"Pay Now\"})]})]})]});}export default CartPage;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CartPage","cart","setCart","JSON","parse","localStorage","getItem","totalPrice","setTotalPrice","total","reduce","sum","item","price","removeFromCart","id","updatedCart","filter","setItem","stringify","handlePayNow","response","fetch","method","headers","body","session","json","window","location","href","url","error","console","className","children","length","map","src","image","alt","name","onClick","toFixed"],"sources":["/Users/kamilatak/web/client/src/pages/CartPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './CartPage.css';\n\nfunction CartPage() {\n    const [cart, setCart] = useState(JSON.parse(localStorage.getItem('cart')) || []);\n    const [totalPrice, setTotalPrice] = useState(0);\n\n    useEffect(() => {\n        const total = cart.reduce((sum, item) => sum + item.price, 0);\n        setTotalPrice(total);\n    }, [cart]);\n\n    const removeFromCart = (id) => {\n        const updatedCart = cart.filter(item => item.id !== id);\n        setCart(updatedCart);\n        localStorage.setItem('cart', JSON.stringify(updatedCart));\n    };\n\n    const handlePayNow = async () => {\n        try {\n            const response = await fetch('/api/create-checkout-session', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({ cart })\n            });\n            const session = await response.json();\n            window.location.href = session.url;\n        } catch (error) {\n            console.error('Error:', error);\n        }\n    };\n\n    return (\n        <div className=\"cart-page\">\n            <h2>Your Cart</h2>\n            {cart.length === 0 ? (\n                <p>Your cart is empty</p>\n            ) : (\n                <>\n                    <ul>\n                        {cart.map(item => (\n                            <li key={item.id}>\n                                <img src={item.image} alt={item.name} />\n                                <div>\n                                    <h3>{item.name}</h3>\n                                    <p>Price: ${item.price}</p>\n                                    <button onClick={() => removeFromCart(item.id)}>Remove</button>\n                                </div>\n                            </li>\n                        ))}\n                    </ul>\n                    <div className=\"cart-summary\">\n                        <h3>Cart Summary</h3>\n                        <p>Total Price: ${totalPrice.toFixed(2)}</p>\n                        <button onClick={handlePayNow}>Pay Now</button>\n                    </div>\n                </>\n            )}\n        </div>\n    );\n}\n\nexport default CartPage;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAExB,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAChB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAACW,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,EAAI,EAAE,CAAC,CAChF,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGhB,QAAQ,CAAC,CAAC,CAAC,CAE/CC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAgB,KAAK,CAAGR,IAAI,CAACS,MAAM,CAAC,CAACC,GAAG,CAAEC,IAAI,GAAKD,GAAG,CAAGC,IAAI,CAACC,KAAK,CAAE,CAAC,CAAC,CAC7DL,aAAa,CAACC,KAAK,CAAC,CACxB,CAAC,CAAE,CAACR,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAa,cAAc,CAAIC,EAAE,EAAK,CAC3B,KAAM,CAAAC,WAAW,CAAGf,IAAI,CAACgB,MAAM,CAACL,IAAI,EAAIA,IAAI,CAACG,EAAE,GAAKA,EAAE,CAAC,CACvDb,OAAO,CAACc,WAAW,CAAC,CACpBX,YAAY,CAACa,OAAO,CAAC,MAAM,CAAEf,IAAI,CAACgB,SAAS,CAACH,WAAW,CAAC,CAAC,CAC7D,CAAC,CAED,KAAM,CAAAI,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,8BAA8B,CAAE,CACzDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEtB,IAAI,CAACgB,SAAS,CAAC,CAAElB,IAAK,CAAC,CACjC,CAAC,CAAC,CACF,KAAM,CAAAyB,OAAO,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CACrCC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGJ,OAAO,CAACK,GAAG,CACtC,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAClC,CACJ,CAAC,CAED,mBACInC,KAAA,QAAKqC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACtBxC,IAAA,OAAAwC,QAAA,CAAI,WAAS,CAAI,CAAC,CACjBlC,IAAI,CAACmC,MAAM,GAAK,CAAC,cACdzC,IAAA,MAAAwC,QAAA,CAAG,oBAAkB,CAAG,CAAC,cAEzBtC,KAAA,CAAAE,SAAA,EAAAoC,QAAA,eACIxC,IAAA,OAAAwC,QAAA,CACKlC,IAAI,CAACoC,GAAG,CAACzB,IAAI,eACVf,KAAA,OAAAsC,QAAA,eACIxC,IAAA,QAAK2C,GAAG,CAAE1B,IAAI,CAAC2B,KAAM,CAACC,GAAG,CAAE5B,IAAI,CAAC6B,IAAK,CAAE,CAAC,cACxC5C,KAAA,QAAAsC,QAAA,eACIxC,IAAA,OAAAwC,QAAA,CAAKvB,IAAI,CAAC6B,IAAI,CAAK,CAAC,cACpB5C,KAAA,MAAAsC,QAAA,EAAG,UAAQ,CAACvB,IAAI,CAACC,KAAK,EAAI,CAAC,cAC3BlB,IAAA,WAAQ+C,OAAO,CAAEA,CAAA,GAAM5B,cAAc,CAACF,IAAI,CAACG,EAAE,CAAE,CAAAoB,QAAA,CAAC,QAAM,CAAQ,CAAC,EAC9D,CAAC,GANDvB,IAAI,CAACG,EAOV,CACP,CAAC,CACF,CAAC,cACLlB,KAAA,QAAKqC,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBxC,IAAA,OAAAwC,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBtC,KAAA,MAAAsC,QAAA,EAAG,gBAAc,CAAC5B,UAAU,CAACoC,OAAO,CAAC,CAAC,CAAC,EAAI,CAAC,cAC5ChD,IAAA,WAAQ+C,OAAO,CAAEtB,YAAa,CAAAe,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC9C,CAAC,EACR,CACL,EACA,CAAC,CAEd,CAEA,cAAe,CAAAnC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}